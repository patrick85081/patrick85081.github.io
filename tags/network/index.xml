<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Network on 派翠克技術手札</title><link>https://patrick85081.github.io/tags/network/</link><description>Recent content in Network on 派翠克技術手札</description><generator>Hugo -- gohugo.io</generator><language>zh-TW</language><lastBuildDate>Tue, 25 May 2021 23:02:52 +0800</lastBuildDate><atom:link href="https://patrick85081.github.io/tags/network/index.xml" rel="self" type="application/rss+xml"/><item><title>Dhcp 協議</title><link>https://patrick85081.github.io/posts/2021-05-25-dhcp-protocol/</link><pubDate>Tue, 25 May 2021 23:02:52 +0800</pubDate><guid>https://patrick85081.github.io/posts/2021-05-25-dhcp-protocol/</guid><description>DHCP (Dynamic Host Configuration Protocol)
DHCP為動態主機設定協定，為了避免發生內網上的IP地址重複發生IP衝突，每當有網路設備要連線時會向DHCP伺服器請求IP地址，由DHCP Server找出尚未使用的IP地址分配給網路設備，同一個區網盡可能只配置一個DHCP Server，如果需要多個DHCP服務器需要分別設定不衝突的派發範圍，避免發生IP地址衝突的情況。
Dhcp V4 Client Method Direction DHCP Client Discover (尋找區網內的DHCP Server) -&amp;gt; DHCP Client Offer (DHCP 分配一組IP地址與租約 給 客戶端) &amp;lt;- DHCP Client Request (告訴DHCP，我使用你的地址) -&amp;gt; DHCP Client Ack (DHCP回應此地址租約正式生效) &amp;lt;- DHCP 封包觀察 DHCP Discover
設備剛上線沒有IP地址，所以Source IP為0.0.0.0，不知道DHCP在哪裡，所以是廣播封包
DHCP Offer
DHCP 伺服器收到請求(192.168.1.200)，發送一組IP為192.168.1.150給目標MAC地址
DHCP Request</description></item><item><title>ARP 協議</title><link>https://patrick85081.github.io/posts/2021-05-19-arp-protocol/</link><pubDate>Wed, 19 May 2021 10:58:28 +0800</pubDate><guid>https://patrick85081.github.io/posts/2021-05-19-arp-protocol/</guid><description>說明 ARP全名為Address Resolution Protocol （位置發現協議），在網路鏈路層上傳遞封包都需要知道目的的Mac Address，但在網路曾是使用網路層地止IP Address，所以需要透過ARP協議去廣播，詢問對方的Mac Address。
ARP 運作 ARP運作方式相當簡單，一個是ARP 詢問（ARP Request），一個是ARP 答復（ARP Reply）。
透過發送ARP Request去廣過，區域網路上的所有電腦，詢問IP地址的MAC地址是多少，如果收到網播的電腦不是這個IP地址就會忽略它，但收到的電腦剛好是這個IP地址，就會進行ARP Reply回應自己的MAC地址。由於路由器會阻擋區域網路中的廣播封包，所以ARP只能詢問同一個網路。
每一台電腦上都有自己的ARP快取，同一個地址一段時間只會詢問一次，避免廣播風暴的發生，另外也可以使用靜態ARP設定，這樣就不需要詢問，但是這兩種方式只要重新開機都會清空。
ARP 指令 查詢ARP記錄 可以利用 arp -a 指令來查詢電腦中所儲存的ARP記錄
C:\&amp;gt; arp -a Interface: 192.168.1.128 --- 0x10 Internet Address Physical Address Type 192.168.1.1 c0-06-c3-3b-5b-ec dynamic 192.168.1.255 ff-ff-ff-ff-ff-ff static 224.0.0.2 01-00-5e-00-00-02 static 224.0.0.22 01-00-5e-00-00-16 static 224.0.0.251 01-00-5e-00-00-fb static 224.0.0.252 01-00-5e-00-00-fc static 239.255.255.250 01-00-5e-7f-ff-fa static 新增靜態APR記錄 利用 arp -s &amp;lt;IP地址&amp;gt; &amp;lt;MAC地址&amp;gt; 新增靜態地址
C:\&amp;gt; arp -s 203.74.205.42 00-00-e8-97-73-86 刪除APR記錄 可利用 arp -d 刪除全部或 arp -d &amp;lt;IP地址&amp;gt; 刪除指定IP的方式。</description></item></channel></rss>