<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>docker on 派翠克技術手札</title><link>https://patrick85081.github.io/tags/docker/</link><description>Recent content in docker on 派翠克技術手札</description><generator>Hugo -- gohugo.io</generator><language>zh-TW</language><lastBuildDate>Tue, 24 May 2022 16:01:20 +0800</lastBuildDate><atom:link href="https://patrick85081.github.io/tags/docker/index.xml" rel="self" type="application/rss+xml"/><item><title>docker container log 上限設定</title><link>https://patrick85081.github.io/posts/2022-05-24-docker-container-log-limit/</link><pubDate>Tue, 24 May 2022 16:01:20 +0800</pubDate><guid>https://patrick85081.github.io/posts/2022-05-24-docker-container-log-limit/</guid><description>最近在linux測試機上發現，不知為何硬碟空間就滿了，最後查證是docker container log 吃滿，而且吃到11GB都不會清除，查了一下原來需要設定log檔案限制。
默認情況容器的 stdout 和 stderr 都會被寫入 /var/lib/docker/containers/[container-id]/[container-id]-json.log 的 json 文件。如果一直無人理會，這個文件最終會佔用大量的磁盤空間。
// 檢查方式 du -Sh /var/lib/docker/containers 修改設定檔案 【需要注意的是：设置的日志大小规则，只对新建的容器有效】
/etc/docker/daemon.json
{ // docker 網卡 IP &amp;#34;bip&amp;#34;: &amp;#34;169.254.0.1/24&amp;#34;, // docker log format &amp;#34;log-driver&amp;#34;: &amp;#34;json-file&amp;#34;, &amp;#34;log-opts&amp;#34;: { // single file size &amp;#34;max-size&amp;#34;: &amp;#34;1m&amp;#34;, // log file count &amp;#34;max-file&amp;#34;: &amp;#34;3&amp;#34; } } 重啟 Docker 下列方法：二擇一 systemctl restart docker.service /etc/init.d/docker restart 觀察結果 檔案被限制在 1M &amp;amp; 檔案數量維持在 3個內
這個檔案就是 docker log 檔案</description></item></channel></rss>